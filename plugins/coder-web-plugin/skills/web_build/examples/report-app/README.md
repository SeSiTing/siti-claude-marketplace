# æŠ¥å·¥é¡µé¢ - å·¥å•ç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªå“åº”å¼çš„ç§»åŠ¨ç«¯æŠ¥å·¥é¡µé¢ï¼Œæ”¯æŒå·¥å•é€‰æ‹©ã€ç‰©æ–™ä¿¡æ¯å±•ç¤ºå’ŒæŠ¥å·¥æ•°æ®æäº¤ã€‚

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½

- ğŸ” **å·¥å•é€‰æ‹©**: æ”¯æŒæœç´¢å’Œé€‰æ‹©å·¥å•
- ğŸ“‹ **ç‰©æ–™ä¿¡æ¯**: æ˜¾ç¤ºå·¥å•å…³è”çš„ç‰©æ–™è¯¦æƒ…å’Œç”Ÿäº§ç»Ÿè®¡
- ğŸ“ **æŠ¥å·¥è¡¨å•**: å½•å…¥ç”Ÿäº§æ•°é‡ã€è¾…åŠ©æ•°é‡ç­‰ä¿¡æ¯
- ğŸ“¤ **æ•°æ®æäº¤**: åœ¨çº¿æäº¤æŠ¥å·¥æ•°æ®

### æŠ€æœ¯ç‰¹æ€§

- ğŸ“± **å“åº”å¼è®¾è®¡**: ç§»åŠ¨ç«¯ä¼˜å…ˆï¼Œé€‚é…å„ç§å±å¹•å°ºå¯¸
- ğŸ” **æ™ºèƒ½è®¤è¯**: æ”¯æŒ URL å‚æ•° code å’Œè‡ªåŠ¨ç™»å½•è·å– token
- âš¡ **æ€§èƒ½ä¼˜åŒ–**: é˜²æŠ–æœç´¢ã€è¯·æ±‚é‡è¯•
- ğŸ¨ **ç°ä»£ UI**: ä½¿ç”¨ Tailwind CSSï¼Œæµç•…çš„åŠ¨ç”»æ•ˆæœ
- ğŸ¯ **ä¸»é¢˜è‰²**: ä½¿ç”¨ `#02B980` ä½œä¸ºä¸»é¢˜è‰²

## æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: åŸç”Ÿ JavaScript (ES6+)
- **æ ·å¼æ¡†æ¶**: Tailwind CSS 3.x
- **HTTP å®¢æˆ·ç«¯**: Fetch API
- **æœ¬åœ°å­˜å‚¨**: LocalStorage (ç”¨äº token å­˜å‚¨)
- **æ„å»ºå·¥å…·**: æ— éœ€æ„å»ºï¼Œç›´æ¥è¿è¡Œ

## é¡¹ç›®ç»“æ„

```
web/report/
â”œâ”€â”€ index.html              # ä¸»é¡µé¢
â”œâ”€â”€ css/
â”‚   â””â”€â”€ custom.css          # è‡ªå®šä¹‰æ ·å¼ï¼ˆä¸»é¢˜è‰²é…ç½®ï¼‰
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ main.js            # ä¸»åº”ç”¨é€»è¾‘
â”‚   â””â”€â”€ common.js          # å·¥å…·å‡½æ•° + UIç»„ä»¶
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ core.js            # APIæœåŠ¡ + è®¤è¯æœåŠ¡
â”‚   â””â”€â”€ business.js       # å·¥å•æœåŠ¡ + æŠ¥å·¥æœåŠ¡
â”œâ”€â”€ api_doc/               # APIæ¥å£æ–‡æ¡£
â”‚   â”œâ”€â”€ æ¥å£è¯´æ˜.txt
â”‚   â”œâ”€â”€ å·¥å•åˆ—è¡¨_BLACKLAKE-1686655055663532 (1).json
â”‚   â”œâ”€â”€ ç”Ÿäº§ä»»åŠ¡åˆ—è¡¨_BLACKLAKE-1681109889053785 (3).json
â”‚   â”œâ”€â”€ æŠ¥å·¥ç‰©æ–™åˆ—è¡¨_BLACKLAKE-1681369551143844.json
â”‚   â”œâ”€â”€ æ‰¹é‡æŠ¥å·¥_BLACKLAKE-1681109889053798 (1).json
â”‚   â””â”€â”€ æŠ¥å·¥è®°å½•åˆ—è¡¨_BLACKLAKE-1681109889053794.json
â””â”€â”€ README.md              # é¡¹ç›®æ–‡æ¡£
```

## å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚

- ç°ä»£æµè§ˆå™¨ (Chrome 60+, Firefox 60+, Safari 12+)
- HTTP æœåŠ¡å™¨ (å¼€å‘ç¯å¢ƒå¯ä½¿ç”¨æœ¬åœ°æœåŠ¡å™¨)

### 2. å®‰è£…è¿è¡Œ

#### æ–¹å¼ä¸€ï¼šç›´æ¥æ‰“å¼€

```bash
# ç›´æ¥ç”¨æµè§ˆå™¨æ‰“å¼€ index.html
open index.html
```

**æ³¨æ„**: ç”±äºæµè§ˆå™¨çš„ CORS é™åˆ¶ï¼Œç›´æ¥æ‰“å¼€å¯èƒ½æ— æ³•æ­£å¸¸è°ƒç”¨ APIï¼Œå»ºè®®ä½¿ç”¨æœ¬åœ°æœåŠ¡å™¨ã€‚

#### æ–¹å¼äºŒï¼šæœ¬åœ°æœåŠ¡å™¨

```bash
# ä½¿ç”¨Pythonå¯åŠ¨æœ¬åœ°æœåŠ¡å™¨
cd web/report
python -m http.server 8000

# æˆ–ä½¿ç”¨Node.js
npx serve .

# è®¿é—® http://localhost:8000
```

#### æ–¹å¼ä¸‰ï¼šLive Server (æ¨è)

```bash
# ä½¿ç”¨VS Codeçš„Live Serveræ’ä»¶
# å³é”® index.html -> Open with Live Server
```

### 3. API é…ç½®è¯´æ˜

ç³»ç»Ÿå·²é…ç½®ä½¿ç”¨é»‘æ¹– API æœåŠ¡å™¨ï¼š`https://v3-feature.blacklake.cn/api`

#### è®¤è¯é…ç½®

è®¤è¯ä¿¡æ¯é…ç½®åœ¨ `services/core.js` æ–‡ä»¶é¡¶éƒ¨çš„ `AUTH_CONFIG` å¯¹è±¡ä¸­ï¼š

```javascript
const AUTH_CONFIG = {
  // ç™»å½•ä¿¡æ¯
  login: {
    type: 1,
    username: "cyy",
    code: "67768820",
    password:
      "794db7135639d5b59cd7e53b325f36a8f24fb906e95e403c49e89b99046654fae36a940c1e8496b75b9e69d4f79022c9123aa0d8cd665e2ea9cf584242a702664e77fdd2399c452bd03a174a3edbb41b86a406851b4da8b11b8faa7044925e3e9bffd4fd5afb14c70f592a2114ce5f45cf567e2e1f0d8688ef345ca28c2687c5",
  },
  // AppKeyï¼ˆç”¨äºè·å–user-access tokenï¼‰
  appKey: "cli_1764100796489835",
};
```

**é‡è¦**: ä¿®æ”¹ç™»å½•è´¦å·æ—¶ï¼Œéœ€è¦åŒæ—¶æ›´æ–° `appKey`ã€‚

#### è®¤è¯æµç¨‹

ç³»ç»Ÿé‡‡ç”¨ä¸‰çº§è®¤è¯æœºåˆ¶ï¼š

1. **ä¼˜å…ˆçº§ 1**: URL å‚æ•°ä¸­çš„ `code`

   ```
   https://your-domain.com/report?code=your_code_here
   ```

   å¦‚æœ URL ä¸­å­˜åœ¨ `code`ï¼Œç›´æ¥ä½¿ç”¨è¯¥ `code` è·å– user-access tokenã€‚

2. **ä¼˜å…ˆçº§ 2**: è‡ªåŠ¨ç™»å½•æµç¨‹
   - è°ƒç”¨ç™»å½•æ¥å£è·å–ç™»å½• token
   - ä½¿ç”¨ç™»å½• token è·å– `code`
   - ä½¿ç”¨ `code` å’Œ `appKey` è·å– user-access token

æ‰€æœ‰ä¸šåŠ¡æ¥å£ä½¿ç”¨ `X-AUTH` å¤´éƒ¨ï¼Œå€¼ä¸º user-access tokenã€‚

## ä½¿ç”¨è¯´æ˜

### é¡µé¢æµç¨‹

1. **åˆå§‹çŠ¶æ€**: æ˜¾ç¤º"å…ˆé€‰æ‹©å·¥å•"æç¤º
2. **é€‰æ‹©å·¥å•**: ç‚¹å‡»å·¥å•åŒºåŸŸï¼Œå¼¹å‡ºå·¥å•åˆ—è¡¨
3. **æœç´¢å·¥å•**: åœ¨æœç´¢æ¡†ä¸­è¾“å…¥å·¥å•ç¼–å·è¿›è¡Œè¿‡æ»¤ï¼ˆæ”¯æŒé˜²æŠ–ï¼‰
4. **ç¡®è®¤é€‰æ‹©**: é€‰ä¸­å·¥å•åç‚¹å‡»"ç¡®å®š"
5. **æŸ¥çœ‹ç‰©æ–™**: æ˜¾ç¤ºå·¥å•å…³è”çš„ç‰©æ–™ä¿¡æ¯å’Œç”Ÿäº§ç»Ÿè®¡
6. **å¡«å†™æŠ¥å·¥**: å½•å…¥æ•°é‡ã€è¾…åŠ©æ•°é‡
7. **æäº¤æŠ¥å·¥**: ç‚¹å‡»"æäº¤"æŒ‰é’®å®ŒæˆæŠ¥å·¥

### æŠ¥å·¥æµç¨‹è¯¦è§£

æ ¹æ® `api_doc/æ¥å£è¯´æ˜.txt`ï¼ŒæŠ¥å·¥æµç¨‹å¦‚ä¸‹ï¼š

1. **ç”¨æˆ·é€‰æ‹©å·¥å•**: ä»å·¥å•åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªå·¥å•
2. **æ˜¾ç¤ºç‰©æ–™ä¿¡æ¯**: ç³»ç»Ÿä»å·¥å•æ•°æ®ä¸­ç›´æ¥æå–ç‰©æ–™ä¿¡æ¯å¹¶å±•ç¤º
3. **ç”¨æˆ·å¡«å†™æŠ¥å·¥æ•°æ®**: å¡«å†™æ•°é‡ã€è¾…åŠ©æ•°é‡ç­‰ä¿¡æ¯
4. **æ„å»ºæŠ¥å·¥å‚æ•°**:
   - é€šè¿‡å·¥å• ID è·å–ç”Ÿäº§ä»»åŠ¡åˆ—è¡¨
   - ä»ç”Ÿäº§ä»»åŠ¡ä¸­è·å– `taskId` å’Œ `executorIds`
   - é€šè¿‡ `taskId` è·å–æŠ¥å·¥ç‰©æ–™åˆ—è¡¨
   - é€‰æ‹©ä¸»äº§å‡ºç‰©æ–™æˆ–ç¬¬ä¸€ä¸ªå¯ç”¨ç‰©æ–™
   - æ„å»º `progressReportMaterial` å¯¹è±¡
5. **æäº¤æŠ¥å·¥**: è°ƒç”¨æ‰¹é‡æŠ¥å·¥æ¥å£æäº¤æ•°æ®
6. **æ¸…ç©ºè¡¨å•**: æäº¤æˆåŠŸåæ¸…ç©ºè¡¨å•ï¼Œå‡†å¤‡ä¸‹æ¬¡æŠ¥å·¥

## API æ¥å£

è¯¦ç»†çš„æ¥å£æ–‡æ¡£è¯·å‚è€ƒ `api_doc` ç›®å½•ä¸‹çš„ JSON æ–‡ä»¶ã€‚ä»¥ä¸‹æ˜¯ä¸»è¦æ¥å£æ¦‚è§ˆï¼š

### è®¤è¯ç›¸å…³

#### 1. ç™»å½•æ¥å£

```
POST https://v3-feature.blacklake.cn/api/user/domain/web/v1/login
Content-Type: application/json

Body: {
    "type": 1,
    "username": "cyy",
    "code": "67768820",
    "password": "..."
}
```

#### 2. è·å– code

```
POST https://v3-feature.blacklake.cn/api/openapiadmin/domain/web/v1/access_token/_code
Headers: X-AUTH: {login_token}
```

#### 3. è·å– user-access token

```
POST https://v3-feature.blacklake.cn/api/openapi/domain/api/v1/access_token/_get_user_token_for_customized
Content-Type: application/json

Body: {
    "code": "...",
    "appKey": "cli_1764100796489835"
}
```

### å·¥å•ç›¸å…³

#### è·å–å·¥å•åˆ—è¡¨

```
POST /openapi/domain/web/v1/route/med/open/v2/work_order/base/_list
Headers: X-AUTH: {user_access_token}
Content-Type: application/json

Body: {
    "page": 1,
    "size": 50,
    "workOrderCode": "å·¥å•ç¼–å·ï¼ˆå¯é€‰ï¼Œæ¨¡ç³ŠæŸ¥è¯¢ï¼‰",
    "exactWorkOrderCode": "å·¥å•ç¼–å·ï¼ˆå¯é€‰ï¼Œç²¾ç¡®æŸ¥è¯¢ï¼‰",
    "workOrderStatusList": [çŠ¶æ€åˆ—è¡¨],
    "pauseFlag": 0
}
```

è¯¦ç»†æ¥å£æ–‡æ¡£ï¼š`api_doc/å·¥å•åˆ—è¡¨_BLACKLAKE-1686655055663532 (1).json`

### æŠ¥å·¥ç›¸å…³

#### 1. è·å–ç”Ÿäº§ä»»åŠ¡åˆ—è¡¨

```
POST /openapi/domain/web/v1/route/mfg/open/v1/produce_task/_list
Headers: X-AUTH: {user_access_token}
Content-Type: application/json

Body: {
    "page": 1,
    "size": 10,
    "workOrderIdList": [å·¥å•IDåˆ—è¡¨]
}
```

è¯¦ç»†æ¥å£æ–‡æ¡£ï¼š`api_doc/ç”Ÿäº§ä»»åŠ¡åˆ—è¡¨_BLACKLAKE-1681109889053785 (3).json`

#### 2. è·å–æŠ¥å·¥ç‰©æ–™åˆ—è¡¨

```
POST /openapi/domain/web/v1/route/mfg/open/v1/progress_report/_list_progress_report_materials
Headers: X-AUTH: {user_access_token}
Content-Type: application/json

Body: {
    "taskId": ç”Ÿäº§ä»»åŠ¡ID
}
```

è¯¦ç»†æ¥å£æ–‡æ¡£ï¼š`api_doc/æŠ¥å·¥ç‰©æ–™åˆ—è¡¨_BLACKLAKE-1681369551143844.json`

#### 3. æ‰¹é‡æŠ¥å·¥

```
POST /openapi/domain/web/v1/route/mfg/open/v1/progress_report/_progress_report
Headers: X-AUTH: {user_access_token}
Content-Type: application/json

Body: {
    "taskId": ç”Ÿäº§ä»»åŠ¡ID,
    "progressReportMaterial": {
        "lineId": ç‰©æ–™è¡ŒID,
        "materialId": ç‰©æ–™ID,
        "reportProcessId": æŠ¥å·¥å·¥åºID
    },
    "qcStatus": 1,
    "reportType": 2,
    "progressReportItems": [{
        "executorIds": [æ‰§è¡ŒäººIDåˆ—è¡¨],
        "progressReportMaterialItems": [{
            "reportAmount": æŠ¥å·¥æ•°é‡,
            "reportUnitId": æŠ¥å·¥å•ä½ID,
            "remark": "å¤‡æ³¨ï¼ˆå¯é€‰ï¼‰"
        }]
    }],
    "storageLocationId": 1716848012872791
}
```

è¯¦ç»†æ¥å£æ–‡æ¡£ï¼š`api_doc/æ‰¹é‡æŠ¥å·¥_BLACKLAKE-1681109889053798 (1).json`

#### 4. æŸ¥è¯¢æŠ¥å·¥è®°å½•

```
POST /openapi/domain/web/v1/route/mfg/open/v1/progress_report/_list
Headers: X-AUTH: {user_access_token}
Content-Type: application/json

Body: {
    "page": 1,
    "size": 20,
    "taskIds": [ç”Ÿäº§ä»»åŠ¡IDåˆ—è¡¨],
    "workOrderIdList": [å·¥å•IDåˆ—è¡¨],
    "reportTimeFrom": æŠ¥å·¥æ—¶é—´èµ·å§‹ï¼ˆæ—¶é—´æˆ³ï¼Œå¯é€‰ï¼‰,
    "reportTimeTo": æŠ¥å·¥æ—¶é—´ç»“æŸï¼ˆæ—¶é—´æˆ³ï¼Œå¯é€‰ï¼‰,
    "processIdList": [å·¥åºIDåˆ—è¡¨ï¼Œå¯é€‰],
    "executorIdList": [æ‰§è¡ŒäººIDåˆ—è¡¨ï¼Œå¯é€‰],
    "qcStatusList": [è´¨é‡çŠ¶æ€åˆ—è¡¨ï¼Œå¯é€‰]
}
```

è¯¦ç»†æ¥å£æ–‡æ¡£ï¼š`api_doc/æŠ¥å·¥è®°å½•åˆ—è¡¨_BLACKLAKE-1681109889053794.json`

## ä»£ç ç»“æ„è¯´æ˜

### services/core.js

åŒ…å«æ ¸å¿ƒæœåŠ¡ï¼š

- **ApiService**: HTTP è¯·æ±‚å°è£…ï¼Œè‡ªåŠ¨å¤„ç†è®¤è¯ã€é”™è¯¯é‡è¯•
- **AuthService**: è®¤è¯æœåŠ¡ï¼Œå¤„ç† token è·å–ã€å­˜å‚¨å’Œç®¡ç†
  - `init()`: åˆå§‹åŒ–è®¤è¯æµç¨‹
  - `getUserAccessTokenByCode(code)`: ä½¿ç”¨ code è·å– user-access token
  - `getCodeByLoginToken(loginToken)`: ä½¿ç”¨ç™»å½• token è·å– code
  - `loginAndGetToken()`: ç™»å½•å¹¶è·å–ç™»å½• token

### services/business.js

åŒ…å«ä¸šåŠ¡æœåŠ¡ï¼š

- **WorkOrderService**: å·¥å•ç›¸å…³ API

  - `getWorkOrderList(params)`: è·å–å·¥å•åˆ—è¡¨
  - `processWorkOrderListResponse(response)`: å¤„ç†å·¥å•åˆ—è¡¨å“åº”
  - `getMockWorkOrderList(params)`: è·å–æ¨¡æ‹Ÿå·¥å•æ•°æ®ï¼ˆç½‘ç»œé”™è¯¯æ—¶ä½¿ç”¨ï¼‰

- **ReportService**: æŠ¥å·¥ç›¸å…³ API
  - `getReportRequiredParams(params)`: è·å–æŠ¥å·¥å¿…å¡«å‚æ•°
  - `buildReportRequestParams(requiredParams, formData)`: æ„å»ºæŠ¥å·¥è¯·æ±‚å‚æ•°
  - `submitReport(reportData)`: æäº¤æŠ¥å·¥
  - `getReportRecordsByTask(params)`: æŸ¥è¯¢æŠ¥å·¥è®°å½•

### js/common.js

åŒ…å«é€šç”¨ä»£ç ï¼š

- **å·¥å…·å‡½æ•°**:

  - `getUrlParameter(name)`: è·å– URL å‚æ•°
  - `debounce(func, wait)`: é˜²æŠ–å‡½æ•°
  - `showToast(message, type, duration)`: æ˜¾ç¤º Toast æ¶ˆæ¯
  - `validateForm(data, rules)`: è¡¨å•éªŒè¯
  - `deepClone(obj)`: æ·±æ‹·è´å¯¹è±¡

- **UI ç»„ä»¶**:
  - `HeaderNav`: é¡¶éƒ¨å¯¼èˆªæ 
  - `WorkOrderSelector`: å·¥å•é€‰æ‹©å™¨
  - `WorkOrderDropdown`: å·¥å•ä¸‹æ‹‰èœå•ï¼ˆæ”¯æŒæœç´¢ï¼‰
  - `MaterialInfo`: ç‰©æ–™ä¿¡æ¯å±•ç¤º
  - `ReportForm`: æŠ¥å·¥è¡¨å•

### js/main.js

ä¸»åº”ç”¨é€»è¾‘ï¼š

- **MainApp**: åº”ç”¨ä¸»ç±»
  - ç®¡ç†åº”ç”¨çŠ¶æ€
  - åˆå§‹åŒ–ç»„ä»¶
  - å¤„ç†ç”¨æˆ·äº¤äº’
  - åè°ƒå„ä¸ªæœåŠ¡

## å¼€å‘æŒ‡å—

### ä¿®æ”¹ç™»å½•è´¦å·

1. æ‰“å¼€ `services/core.js`
2. ä¿®æ”¹ `AUTH_CONFIG` å¯¹è±¡ä¸­çš„ç™»å½•ä¿¡æ¯
3. **é‡è¦**: åŒæ—¶æ›´æ–° `appKey`ï¼ˆä¸åŒè´¦å·å¯¹åº”ä¸åŒçš„ appKeyï¼‰

### è‡ªå®šä¹‰ä¸»é¢˜è‰²

ä¸»é¢˜è‰²é…ç½®åœ¨ `css/custom.css` ä¸­ï¼š

```css
:root {
  --primary-color: #02b980;
  --primary-hover: #029968;
  --primary-light: #e6f7f1;
  --primary-dark: #016b4a;
  --primary-shadow: rgba(2, 185, 128, 0.1);
}
```

ä¿®æ”¹è¿™äº›å˜é‡å³å¯æ”¹å˜æ•´ä¸ªåº”ç”¨çš„ä¸»é¢˜è‰²ã€‚

### æ·»åŠ æ–°åŠŸèƒ½

1. **æ–°å¢ API æ¥å£**: åœ¨ `services/business.js` ä¸­å¯¹åº”çš„æœåŠ¡ç±»ä¸­æ·»åŠ æ–¹æ³•
2. **æ–°å¢ UI ç»„ä»¶**: åœ¨ `js/common.js` ä¸­å®šä¹‰ç»„ä»¶ç±»
3. **é›†æˆåˆ°ä¸»åº”ç”¨**: åœ¨ `js/main.js` ä¸­é›†æˆæ–°åŠŸèƒ½

### è°ƒè¯•æ¨¡å¼

åœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼Œæ‰€æœ‰æœåŠ¡éƒ½ä¼šæš´éœ²åˆ°å…¨å±€ï¼Œæ–¹ä¾¿è°ƒè¯•ï¼š

```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­ä½¿ç”¨
MainApp.getState(); // è·å–åº”ç”¨çŠ¶æ€
authService.getToken(); // è·å–å½“å‰token
workOrderService.getWorkOrderList(); // è·å–å·¥å•åˆ—è¡¨
reportService.submitReport(); // æäº¤æŠ¥å·¥
```

## éƒ¨ç½²è¯´æ˜

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

1. **é…ç½® API åœ°å€**: ä¿®æ”¹ `services/core.js` ä¸­ `ApiService.getBaseURL()` æ–¹æ³•
2. **é…ç½®è®¤è¯ä¿¡æ¯**: ä¿®æ”¹ `services/core.js` ä¸­çš„ `AUTH_CONFIG`
3. **ä¸Šä¼ æ–‡ä»¶**: å°†æ•´ä¸ª `web/report` ç›®å½•ä¸Šä¼ åˆ°æœåŠ¡å™¨
4. **é…ç½®æœåŠ¡å™¨**: ç¡®ä¿æœåŠ¡å™¨æ”¯æŒé™æ€æ–‡ä»¶æœåŠ¡
5. **HTTPS**: å»ºè®®ä½¿ç”¨ HTTPS åè®®ï¼Œç‰¹åˆ«æ˜¯åœ¨ç§»åŠ¨ç«¯

### Nginx é…ç½®ç¤ºä¾‹

```nginx
server {
    listen 80;
    server_name your-domain.com;
    root /path/to/web/report;
    index index.html;

    # APIä»£ç†ï¼ˆå¦‚æœéœ€è¦ï¼‰
    location /api/ {
        proxy_pass https://v3-feature.blacklake.cn/api/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    # é™æ€æ–‡ä»¶
    location / {
        try_files $uri $uri/ /index.html;
    }

    # ç¼“å­˜é™æ€èµ„æº
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```
